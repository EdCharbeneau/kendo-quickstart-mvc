<!DOCTYPE html>
<html lang="en">
<head>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Telerik UI for ASP.NET MVC Quick Start</title>

	<meta charset="utf-8">
	<meta name="description" content="A quick-start guide for NativeScript CLI apps">
	<meta name="author" content="TJ VanToll, Jen Looper">
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="css/style.css" rel="stylesheet">
</head>
<body>

<div id="container">
	<div id="header">
		<a href="#" class="menu header-btn" id="toggle-toc"></a>
		<h1>UI for ASP.NET MVC Quick Start</h1>
		<a href="https://github.com/NativeScript/quick-start" class="github header-btn"></a>
	</div>

	<div id="content-container">
		<div id="toc">
			<div class="toc-heading">Table of Contents</div>
			<div id="toc-padding"></div>
		</div>
		<div id="book">
			<div class="chapter">
				<h2 id="introduction">Introduction</h2>
<p>Welcome to the <a href="http://www.telerik.com/aspnet-mvc">UI for ASP.NET MVC</a> quick-start guide. In this guided tutorial you&#39;ll learn how to install, configure, and utilize UI for ASP.NET MVC to build a rich single page dashboard application that works beautifully on any device.</p>
<h3 id="what-you-re-building">What you&#39;re building</h3>
<p>This guide will walk you through building Team Efficiency Dashboard, a single page app that does the following things:</p>
<ul>
<li>Connects rich chart visualizations and grids to a SQL data source</li>
<li>Provides an interactive master/detail dashboard with filtering, sorting and exporting</li>
<li>Responds to any device size including: mobile, tablet and desktop</li>
</ul>
<p>If you follow along until the end, here is what the finished app will look like.</p>
<p><img src="images/chapter0/dashboard.jpg" alt=""></p>
<p>And here is what the app will look like on mobile.</p>
<p><img src="images/chapter0/mobile-dashboard.jpg" alt=""></p>
<h3 id="ui-for-asp-net-mvc-vs-kendo-ui-widgets">UI for ASP.NET MVC vs Kendo UI widgets</h3>
<p>From client-side point of view, the vanilla HTML/JavaScript <strong>Kendo UI</strong> widgets and the rendered <strong>UI for ASP.NET MVC</strong> represent the same thing and provide the same capabilities.
However, the UI for ASP.NET MVC wrappers provide additional capabilities for use with ASP.NET MVC and tooling for VisualStudio. Refer to the <a href="http://docs.telerik.com/kendo-ui/aspnet-mvc/kendo-ui-vs-mvc-wrappers">documentation</a> for a complete feature comparison.</p>
<h3 id="important-resources">Important Resources</h3>
<ul>
<li><a href="http://docs.telerik.com/kendo-ui/aspnet-mvc/introduction">Documentation - UI for ASP.NET MVC</a></li>
<li><a href="http://docs.telerik.com/KENDO-UI/api/aspnet-mvc/Kendo.Mvc/AggregateFunction">API References - UI for ASP.NET MVC</a></li>
<li><a href="http://www.telerik.com/account/support-tickets/my-support-tickets.aspx">Support</a></li>
</ul>

			</div>
			<hr>
			<div class="chapter">
				<h2 id="getting-up-and-running">Getting up and running</h2>
<p>In this chapter you&#39;re going to start with the basics, including starting a new project, adding UI for MVC to your project, and installing the quick start template.</p>
<h3 id="create-a-new-mvc-project">Create a new MVC project</h3>
<p>UI for ASP.NET MVC can easily be added to an existing ASP.NET MVC project in just a few clicks using VisualStudio. </p>
<p>Start by creating a new ASP.NET MVC project. You&#39;ll use this project throughout the rest of this tutorial to build your application.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Create a new MVC project<br></h4>

<p>Click <strong>File &gt; New Project</strong></p>
<p>In the New Project dialog choose the <b>ASP.NET Web Application</b> template by expanding the &quot;Templates&quot; tree to <b>Templates &gt; Visual C# &gt; Web</b></p>
<p><img src="images/chapter1/file-new-mvc-project.jpg" alt=""></p>
<p>Give the application a name (ex: MyQuickStartApp)</p>
<p>Click <b>OK</b> to continue</p>
<p><img src="images/chapter1/file-new-mvc-project2.jpg" alt=""></p>
<p>In the <b>New ASP.NET Project</b> dialog, choose MVC from the 4.6 template selection</p>
<p>Click <b>OK</b> to finish</p>
<div class="exercise-end"></div>

<h3 id="install-the-quick-start-boilerplate">Install the quick start boilerplate</h3>
<p>With the new project created, it&#39;s time to start building your app. For this guide, we&#39;ve scaffolded out a boilerplate project to act as a starting point for the Team Efficiency Dashboard.</p>
<p>The boilerplate has an HTML page, the Northwind database and some server-side code you may find in a typical MVC project.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Install the quick start boilerplate<br></h4>

<p>Using the package manager console, run the following command</p>
<pre><code>PM&gt; Install-Package KendoQsBoilerplate
</code></pre><p>Alternatively, you can use the package manager GUI</p>
<p>From the Solution Explorer <strong>right-click References</strong>, then choose <strong>Manage NuGet Packages</strong></p>
<p><img src="images/chapter1/nuget-gui.jpg" alt=""></p>
<p>Search for <strong>KendoQsBoilerplate</strong></p>
<p><img src="images/chapter1/nuget-gui2.jpg" alt=""></p>
<p><strong>Click Install</strong> to continue</p>
<p>When the package installs you may be prompted to accept a license agreement for the NortwindDB, click <strong>I Accept</strong> to continue</p>
<p>It is normal for the quick start boiler plate to overwrite existing files, when prompted with a file conflict choose <strong>Yes to All</strong></p>
<p><img src="images/chapter1/file-conflict.jpg" alt=""></p>
<div class="exercise-end"></div>

<p>With the boilerplate installed, take a moment to run the application. If all went well, you should see something like this:</p>
<p><img src="images/chapter1/wire-frame.jpg" alt=""></p>
<h3 id="convert-to-telerik-application">Convert to Telerik Application</h3>
<p>At this point, you have the wire frame for a basic MVC application. Next you will be adding the UI for ASP.NET MVC to the application by using the convert to Telerik application tooling. When an application is converted to a Telerik application, all required HTML, CSS, JavaScript and .DLL libraries are added. This is the first step you would take to upgrade a new or existing MVC project to use Kendo.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Convert to a Telerik Application
</h4>

<p>Stop the application if it is already running.</p>
<p>In the Solution Explorer <strong>right-click</strong> on the project name and select <strong>Telerik UI for ASP.NET MVC &gt; Convert to Telerik Application</strong>. This will launch the Project Configuration Wizard, from here we can choose settings for our Telerik project.</p>
<p><img src="images/chapter1/convert-to-telerik1.jpg" alt=""></p>
<p>For this tutorial your project will use CDN support. This means all Kendo resources are served from Telerik&#39;s content delivery network (CDN) versus relying on your server for the assets. Mark the box <strong>Use CDN support</strong> and click <strong>Next</strong> to continue.</p>
<p><img src="images/chapter1/convert-to-telerik2.jpg" alt=""></p>
<p>Since the boilerplate is designed with <a href="http://getbootstrap.com">Bootstrap</a>, <strong>choose Bootstrap</strong> from themes select box so the theme matches the current look of the boilerplate. You&#39;ll change the theme later when you&#39;re ready to customize the look of the application.</p>
<p><img src="images/chapter1/convert-to-telerik3.jpg" alt=""></p>
<p>Open <strong>\Views\Shared_Layout.cshtml</strong> find and remove the following script bundle <code>@Scripts.Render(&quot;~/bundles/modernizr&quot;)</code>. This script is included with the Kendo assets.</p>
<p>Next, find the CSS bundle <code>@Styles.Render(&quot;~/Content/css&quot;)</code> and move it just above the closing head tag <code>&lt;/head&gt;</code> this will make sure that any custom styles are applied when you customize the application.</p>
<p>The final code of the head section should look like this:</p>
<pre><code>    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;

    &lt;title&gt;@ViewBag.Title - UI for MVC / Kendo Quick Start Guide&lt;/title&gt;

    &lt;link href=&quot;http://cdn.kendostatic.com/2015.3.1111/styles/kendo.common-bootstrap.min.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
    &lt;link href=&quot;http://cdn.kendostatic.com/2015.3.1111/styles/kendo.mobile.all.min.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
    &lt;link href=&quot;http://cdn.kendostatic.com/2015.3.1111/styles/kendo.dataviz.min.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
    &lt;link href=&quot;http://cdn.kendostatic.com/2015.3.1111/styles/kendo.bootstrap.min.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
    &lt;link href=&quot;http://cdn.kendostatic.com/2015.3.1111/styles/kendo.dataviz.bootstrap.min.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;
    &lt;script src=&quot;http://cdn.kendostatic.com/2015.3.1111/js/jquery.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;http://cdn.kendostatic.com/2015.3.1111/js/jszip.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;http://cdn.kendostatic.com/2015.3.1111/js/kendo.all.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;http://cdn.kendostatic.com/2015.3.1111/js/kendo.aspnetmvc.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;@Url.Content(&quot;~/Scripts/kendo.modernizr.custom.js&quot;)&quot;&gt;&lt;/script&gt;
    @Styles.Render(&quot;~/Content/css&quot;)
</code></pre><blockquote>
<p><strong>Tip</strong>: Because the <strong>Convert to Telerik application</strong>, <strong>Upgrade Project</strong>, or <strong>Configure Project</strong> wizards modify the <code>_Layout.cshtml</code> file, be sure to check position of any custom CSS declarations afterward.        </p>
</blockquote>
<div class="exercise-end"></div>

<p>Now that your app is ready for development, let&#39;s add some simple input components to create a nice user experience.</p>

			</div>
			<hr>
			<div class="chapter">
				<h2 id="input-controls">Input Controls</h2>
<p>In this chapter you&#39;ll learn how to add Kendo UI components to your application. UI for MVC has powerful HTML Helpers that render Kendo UI components.</p>
<h3 id="kendo-helper-overview">Kendo Helper Overview</h3>
<p><strong>Server-side wrappers</strong></p>
<p>Telerik UI for ASP.NET MVC is a set of server-side wrappers. A server-wrapper does the following.</p>
<ul>
<li>Allows the developer to configure a Kendo UI widget via C# or VB.NET code - set its value, data source etc.</li>
<li>Renders the HTML and JavaScript needed to initialize the Kendo UI widget. The widget options propagate to the client-side via the widget initialization script.</li>
</ul>
<p><img src="images/chapter2/wrapper-output.png" alt="Server-side wrapper outputs HTML and JavaScript"></p>
<p><strong>Configuration</strong></p>
<p>The Kendo HtmlHelper exposes all Kendo UI server wrappers.</p>
<p><img src="images/chapter2/kendo-extension.png" alt="Kendo HtmlHelper extension method"></p>
<p><strong>Widget options</strong></p>
<p>The widget options are exposed via fluent interface.</p>
<p><img src="images/chapter2/fluent-interface.png" alt="Fluent interface"></p>
<p>Below is an example of how a Numeric Text Box input is created:</p>
<pre><code>@(Html.Kendo().NumericTextBox()
    .Name(&quot;name&quot;) // set the name of the NumericTextBox
    .Value(10) //set the value
    .Spinners(false) // disable the spinners
)
</code></pre><h3 id="adding-a-kendo-datepicker">Adding a Kendo DatePicker</h3>
<p>Let&#39;s open the <code>Index.cshtml</code> page under the folder <code>views/home/</code>. The <code>Index.cshtml</code> page is where most of the application&#39;s UI lives. This page currently contains basic HTML inputs to collect date input from the user. To provide a better user experience, replace the standard HTML inputs with Kendo date picker controls. The Kendo date picker controls offer users a fly out calendar to choose a desired date.</p>
<blockquote>
<p>Note: The Kendo date picker control is touch and mouse friendly. No additional code is necessary to support tablets and phones.</p>
</blockquote>
<h4 class="exercise-start">
    <b>Exercise</b>: Replace StatsFrom and StatsTo TextBoxes with Kendo Date Pickers
</h4>

<p>Open <code>Views/Home/Index.cshtml</code></p>
<p>Find the <code>StatsFrom</code> text box </p>
<pre><code>&lt;!-- Stats From Date Picker --&gt;
@Html.TextBox(&quot;StatsFrom&quot;, new DateTime(1996, 1, 1))
</code></pre><p>Replace the code with a Kendo date picker</p>
<pre><code>&lt;!-- Stats From Date Picker --&gt;
@(Html.Kendo().DatePicker()
       .Name(&quot;StatsFrom&quot;)
       .Value(new DateTime(1996, 1, 1))
)        
</code></pre><p>Find the <code>StatsTo</code> text box</p>
<pre><code>&lt;!-- Stats To Date Picker --&gt;
@Html.TextBox(&quot;StatsTo&quot;, new DateTime(1996, 1, 1))    
</code></pre><p>Replace the code with a Kendo date picker</p>
<pre><code>&lt;!-- Stats To Date Picker --&gt;
@(Html.Kendo().DatePicker()
        .Name(&quot;StatsTo&quot;)
        .Value(new DateTime(1998, 8, 1))
)
</code></pre><p>The Kendo HTML helper&#39;s fluent interface let you configure their behavior and appearance. The code you just added uses the following properties:</p>
<ul>
<li>Name: Sets the rendered HTML element&#39;s id property.</li>
<li>Value: Sets a default selected date value for the date picker </li>
</ul>
<div class="exercise-end"></div>

<p>After you run your app with this change, you will see a calendar icon in the <strong>Stats from</strong> field. Click or tap the icon to reveal the date picker:</p>
<p><img src="images/chapter2/date-picker-flyout.jpg" alt="Tap to show a date picker"></p>

			</div>
						<hr>
			<div class="chapter">
				<h2 id="scaffolding">Scaffolding</h2>
<p>In this chapter, you&#39;ll learn how to add leverage UI for MVC&#39;s scaffolding capabilities. One feature that MVC developers are quite used to is scaffolding. Visual-Studio-powered MVC scaffolding is a code generation framework that allows you to hook up your model to a controller and render views that are strongly typed, among other things. Since the scaffolding is simply a code generation tool, you are free to change any of the code that it generated.</p>
<h3 id="upgrade-the-database">Upgrade the database</h3>
<p>A copy of the Nortwind database in included with the Kendo Quick Start Boilerplate. Before you begin scaffolding make sure the Nortwind database is upgraded.  Having a working connection to the database is needed for the scaffolding wizard to work properly.</p>
<blockquote>
<p>Note: Upgrading the database is only necessary for this guide because the database supplied must support multiple versions of SQL therefore we chose the lowest database version possible.</p>
</blockquote>
<h4 class="exercise-start">
    <b>Exercise</b>: Upgrade the Northwind Database
</h4>

<blockquote>
<p>Note: If you do not have a SQL Server instance installed on your machine, you may need to install SQL Server Express Edition from Microsoft. You can download the free installer <a href="http://www.microsoft.com/en-us/server-cloud/products/sql-server-editions/sql-server-express.aspx">here</a>.</p>
</blockquote>
<p>Using Visual Studio&#39;s <strong>Server Explorer</strong>, expand <strong>DataConnections</strong> and <strong>right-click NortwindDB &gt; Modify Connection</strong>.</p>
<p><img src="images/chapter3/upgrade-db-1.jpg" alt=""></p>
<p>Next, <strong>click OK</strong>.</p>
<p><img src="images/chapter3/upgrade-db-2.jpg" alt=""></p>
<p>Finally, <strong>click Yes</strong> to complete the upgrade.</p>
<p><img src="images/chapter3/upgrade-db-3.jpg" alt=""></p>
<p>Once the upgrade is complete, <strong>expand</strong> the Northwind Database Tables to verify connectivity.</p>
<p><img src="images/chapter3/upgrade-db-4.jpg" alt=""></p>
<div class="exercise-end"></div>

<p>With the database upgraded use the scaffolding wizard to create an interactive grid view. </p>
<h3 id="ui-for-mvc-scaffolding-wizard">UI for MVC Scaffolding wizard</h3>
<p>The scaffolding wizard will aid you in creating the view by providing point a click configuration screen.Use the scaffolding wizard to create an interactive Kendo Grid view of invoices for the Team Efficiency Dashboard. By enabling grid features like: sorting, paging and exporting users will be able to analyze and share data in a familiar way.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Scaffold a Grid view of invoices
</h4>

<p>Start the scaffolding wizard by <strong>right-clicking Controllers &gt; Add &gt; New Scaffolded Item</strong></p>
<p><img src="images/chapter3/scaffold-1.jpg" alt=""></p>
<p>Choose the <strong>Kendo UI Scaffolder</strong> and click <strong>Add</strong> to continue</p>
<p><img src="images/chapter3/scaffold-2.jpg" alt=""></p>
<p>Notice the Scaffolder is capable of creating Grid, Chart, and Scheduler views for both C# and JavaScript. For this guide you&#39;ll be using the UI for MVC Grid scaffolding option. Choose <strong>UI for MVC Grid</strong> and click <strong>Add</strong> to continue.</p>
<p><img src="images/chapter3/scaffold-3.jpg" alt=""></p>
<p>From MVC Grid scaffolding dialog, the Grid&#39;s model options, grid options and events are defined. The Model Options control the following settings:</p>
<ul>
<li><em>Controller Name</em> - The name of the controller created by the scaffolder.</li>
<li><em>View Name</em> - The name of the view created, which will display the scaffolded grid.</li>
<li><em>Model Class</em> - The model the scaffolder will use to build the view.</li>
<li><em>Data Context Class</em> - The Entity Framework DbContext used to connect the view to the data.</li>
</ul>
<p>Define the Grid&#39;s model options using the following values:</p>
<ul>
<li>Controller Name: <strong>InvoiceController</strong></li>
<li>View Name: <strong>Index</strong></li>
<li>Model Class: <strong>Invoice</strong></li>
<li>Data Context Class: <strong>NorthwindDBContext</strong></li>
</ul>
<p><img src="images/chapter3/scaffold-4.jpg" alt=""></p>
<p>The Grid Options control what features are scaffolded &amp; enabled on the grid including:</p>
<ul>
<li><em>DataSource</em> Type - Ajax, Server or WebApi.</li>
<li><em>Editable</em> - Enable the editing, configure the edit mode (InLine, InCell or PopUp) and the operations to be included (Create, Update, Destroy).</li>
<li><em>Filterable</em> - Enable the filtering of the Grid and select the filter mode.</li>
<li><em>Column Menu</em> - Enable the column menu.</li>
<li><em>Navigatable</em> - Enable the keyboard navigation.</li>
<li><em>Pageable</em> - Enable the paging of the Grid.</li>
<li><em>Reorderable</em> - Enable the column reording.</li>
<li><em>Scrollable</em> - Enable the scrolling of the Grid table.</li>
<li><em>Selectable</em> - Enable the selection and specify the selection mode and type.</li>
<li><em>Sortable</em> - Enable the sorting and specify the sorting mode.</li>
<li><em>Excel Export</em> - Enable the Excel export functionality.</li>
<li><em>PDF Export</em> - Enable the PDF export functionality.</li>
</ul>
<p>Define the Grid&#39;s options using the following values:</p>
<ul>
<li>[ ] Scrollable</li>
<li>[x] Sortable</li>
<li>[x] Pageable</li>
<li>[x] Excel Export</li>
<li>[x] PDF Export</li>
</ul>
<p><img src="images/chapter3/scaffold-5.jpg" alt=""></p>
<p>Click <strong>Add</strong> to continue and create the scaffolded items.</p>
<p>The scaffolder will create the following files:</p>
<ul>
<li><code>Controllers/InvoiceController.cs</code> - This controller has the actions for the features selected in the scaffolding wizard.<ul>
<li><code>Index</code> returns the view</li>
<li><code>Invoices_Read</code> - gets all invoices from the database and returns a JSON formatted <strong>DataSourceRequest</strong> object. The <strong>DataSourceRequest</strong> will contain the current grid request information - page, sort, group and filter.</li>
<li><code>Excel_Export_Save</code> - creates an XLS exported File result.</li>
<li><code>Pdf_Export_Save</code> - creates a PDF exported File result.</li>
</ul>
</li>
<li><code>Views/Invoice/Index.cshtml</code> - This view contains the markup and HTML helper responsible for rendering the Grid control.</li>
</ul>
<p>Run the application and navigate to <code>/Invoice/index</code> to see the generated grid control. You should see the following output:</p>
<p><img src="images/chapter3/invoices-grid.jpg" alt=""></p>
<div class="exercise-end"></div>
			</div>
						<hr>
			<div class="chapter">
				<h2 id="kendo-grid">Kendo Grid</h2>
<p>In this chapter you will modify the scaffolded Grid code to further customize the Grid&#39;s appearance and incorporate the Grid into the dashboard view. </p>
<h3 id="configuring-kendo-grid-options">Configuring Kendo Grid options</h3>
<p>As you may have noticed in the scaffolding wizard, the Grid is a versatile component with many options. The options for the Grid are set using the server-side HTML wrapper. Take a close look at the code generated by the scaffolder in <code>/Views/Invoices/Index.cshtml</code>, below is a breakdown with additional comments of what each configuration method is used for. Also make note that the fluent API chain can be extended to include further options, and there is no strict order in which the options are defined.</p>
<pre><code>    @(Html.Kendo().Grid&lt;KendoQsBoilerplate.Invoice&gt;() // Kendo UI Grid Wrapper
        // Name, also HTML elements &quot;id&quot; attribute
        .Name(&quot;grid&quot;)
        // Grid column bindings
        .Columns(columns =&gt;
        {
            columns.Bound(c =&gt; c.CustomerName);
            columns.Bound(c =&gt; c.OrderDate);
            columns.Bound(c =&gt; c.ProductName);
            columns.Bound(c =&gt; c.UnitPrice);
            columns.Bound(c =&gt; c.Quantity);
            columns.Bound(c =&gt; c.Salesperson);
        })
        // Toolbars
        .ToolBar(toolbar =&gt; {
                toolbar.Excel();
                toolbar.Pdf();
        })
        // Enable Paging
        .Pageable()
        // Enable Sorting
        .Sortable(sortable =&gt; {
            sortable.SortMode(GridSortMode.SingleColumn);
        })
        // Disable Scrolling
        .Scrollable(scrollable =&gt; scrollable.Enabled(false))
        // Datasource configuration
        .DataSource(dataSource =&gt; dataSource
            .Ajax()
            // Read method action and controller
            .Read(read =&gt; read.Action(&quot;Invoices_Read&quot;, &quot;Invoice&quot;))
        )
    )
</code></pre><blockquote>
<p>TIP: If you find the comments above useful, feel free to copy them into your project. Comments are completely valid inside the Fluent API chain.</p>
</blockquote>
<h4 class="exercise-start">
    <b>Exercise</b>: Modify the Grid&#39;s Name/id property
</h4>

<p>Change the Grid&#39;s <code>Name</code>/<code>id</code> from &quot;grid&quot; to &quot;EmployeeSales&quot;. This is an important step since you will reference the control later by its HTML <code>id</code> attribute.</p>
<p>Find the <code>.Name</code> method and change the value from <code>&quot;grid&quot;</code> to <code>&quot;EmployeeSales&quot;</code></p>
<pre><code>@(Html.Kendo().Grid&lt;KendoQsBoilerplate.Invoice&gt;()
      .Name(&quot;grid&quot;)
      ...
)
</code></pre><p>The resulting code should be</p>
<pre><code>@(Html.Kendo().Grid&lt;KendoQsBoilerplate.Invoice&gt;()
      .Name(&quot;EmployeeSales&quot;)
      ...
)
</code></pre><div class="exercise-end"></div>

<p>Now add the Grid to the Dashboard page <code>/Home/Index.cshtml</code>. To keep things tidy, add the Grid to the Dashboard as a child action using <code>Html.Action</code> in the <code>/Home/Index.cshtml</code> view. This will keep the Grid&#39;s view and controller code separate and easy to find. </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Add the Grid to the Dashboard
</h4>

<p>Ensure the application&#39;s layout is not repeated, set the <code>Layout</code> of the view to <code>null</code>. Skipping this step will result in duplicate scripts which could cause the page to load improperly.</p>
<p>At the top of <code>/Views/Invoices/Index.cshtml</code> add</p>
<pre><code>@{ Layout = null;}
</code></pre><p>The resulting code should be: </p>
<pre><code>@{ Layout = null;}
@(Html.Kendo().Grid&lt;KendoQsBoilerplate.Invoice&gt;()
      .Name(&quot;EmployeeSales&quot;)
      ...
)
</code></pre><p>Add the Grid as a child action. Open <code>/Home/Index.cshtml</code> and locate the <code>&lt;!-- Invoices --&gt;</code> placeholder and replace it with the child action <code>@Html.Action(&quot;Index&quot;,&quot;Invoice&quot;)</code></p>
<pre><code>&lt;!-- Invoices --&gt;
@Html.Ipsum().table(5, 3, &quot;d,t,n&quot;, new { @class = &quot;table table-striped table-bordered&quot; })
</code></pre><p>The resulting code should be: </p>
<pre><code>&lt;!-- Invoices --&gt;
@Html.Action(&quot;Index&quot;,&quot;Invoice&quot;)
</code></pre><p>Run the project and visit the dashboard page <code>/Home/Index</code> in the browser. Take a moment to interact with the Grid&#39;s sorting, paging, and exporting features.</p>
<div class="exercise-end"></div>

<p>Currently the data in Grid column <code>Order Date</code> is verbose and should look something like <strong>&quot;Mon Aug 25 1997 00:00:00 GMT-0400 (Eastern Daylight Time)&quot;</strong>. This isn&#39;t very user-friendly, let&#39;s change that.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Customize the Order Date column formatting.
</h4>

<p>You can keep the application running while performing this exercise.</p>
<p>The Grid&#39;s data can easily be formatted by adding the <code>.Format</code> property chain to any column. Use the Date Format <code>MM/dd/yyyy</code> on the <code>OrderDate</code> column using the <code>.Format</code> method.</p>
<p>Open &#39;/Views/Invoice/Index.cshtml&#39; and find the <code>OrderDate</code> column property.</p>
<pre><code>columns.Bound(c =&gt; c.OrderDate);
</code></pre><p>Apply the formatting by inserting <code>.Format(&quot;{0:MM/dd/yyyy}&quot;)</code> into the API chain.</p>
<p>The resulting code should be: </p>
<pre><code>columns.Bound(c =&gt; c.OrderDate).Format(&quot;{0:MM/dd/yyyy}&quot;);
</code></pre><p>Refresh the application to see the formatting changes take place. Notice the <code>Order Date</code> column is now much easier on the eye.</p>
<div class="exercise-end"></div>

<p>At this point all of the records are being pulled from the database. Don&#39;t worry, as we progress through the next several chapters that will change as you learn how to work with Kendo UI and datasources on the client side. First, let&#39;s setup some additional UI elements to provide a source for filtering data. </p>

			</div>
						<hr>
			<div class="chapter">
				<h2 id="kendo-listview">Kendo ListView</h2>
<p>In this chapter you will learn about the Kendo ListView control and client side templates. Using the ListView you&#39;ll create a list of employees containing the employee&#39;s full name and avatar image. This ListView will allow users to interact with the dashboard as a master/detail view.</p>
<h3 id="the-listview-control">The ListView control</h3>
<p>The purpose of <a href="http://docs.telerik.com/kendo-ui/controls/data-management/listview/basic-usage">Kendo UI ListView</a> is to display a custom layout of data-bound items through templates. The ListView is ideally suited for scenarios where you wish to display a list of items in a consistent manner.</p>
<p>The ListView is designed to put you back in control when it comes to displaying data. It does not provide a default rendering of data-bound items, but, instead, it relies entirely on templates to define how a list of items - including alternating items and items being edited - is displayed.</p>
<p>Example:</p>
<pre><code>@(Html.Kendo().ListView(Model) //The listview will be initially bound to the Model which is the Products table
        .Name(&quot;productListView&quot;) //The name of the listview is mandatory. It specifies the &quot;id&quot; attribute of the widget.
        .TagName(&quot;div&quot;) //The tag name of the listview is mandatory. It specifies the element which wraps all listview items.
        .ClientTemplateId(&quot;template&quot;) // This template will be used for rendering the listview items.
        .DataSource(dataSource =&gt; {
            dataSource.Read(read =&gt; read.Action(&quot;Products_Read&quot;, &quot;ListView&quot;));
        }) // DataSource configuration. It will be used on paging.
        .Pageable() //Enable paging
)
</code></pre><h4 class="exercise-start">
    <b>Exercise</b>: Add a ListView to the dashboard.
</h4>

<p>Since you will need to update the <code>HomeController</code> stop project if it is already running.</p>
<p>Open <code>/Views/Home/Index.cshtml</code> and find the placeholder <code>&lt;!-- Employee List View --&gt;</code>.</p>
<p>Remove the <code>&lt;ul&gt;</code> and its child elements that follow <code>&lt;!-- Employee List View --&gt;</code>.</p>
<p>Now add a Kendo ListView of <code>KendoQsBoilerplate.Employee</code> using the Fluent HTML Helper <code>@(Html.Kendo().ListView&lt;KendoQsBoilerplate.Employee&gt;()</code>.</p>
<p>Set the <code>Name</code> property to <code>&quot;EmployeesList&quot;</code>.</p>
<p>Set the <code>ClientTemplateId</code> property to <code>&quot;EmployeeItemTemplate&quot;</code>. The template EmployeeItemTemplate will be created later in the exercise. </p>
<p>Set the <code>TagName</code> property to <code>&quot;ul&quot;</code>. The TagName is the element type that will wrap the ListView items when the control is rendered. In this case, we&#39;re creating an unordered list element.</p>
<p>Set the <code>DataSource</code> read action to <code>&quot;EmployeeList_Read&quot;</code> and the controller to <code>&quot;Home&quot;</code>. The action will be created later in the exercise.</p>
<p>Set the <strong>select mode</strong> by setting the <code>Selectable</code> property to <code>ListViewSelectionMode.Single</code>.</p>
<p>The resulting code should look like the following: </p>
<pre><code>&lt;!-- Employee List View --&gt;
@(Html.Kendo().ListView&lt;KendoQsBoilerplate.Employee&gt;()
            .Name(&quot;EmployeesList&quot;)
            .ClientTemplateId(&quot;EmployeeItemTemplate&quot;)
            .TagName(&quot;ul&quot;)
            .DataSource(dataSource =&gt;
            {
                dataSource.Read(read =&gt; read.Action(&quot;EmployeesList_Read&quot;, &quot;Home&quot;));
                dataSource.PageSize(9);
            })
            .Selectable(s =&gt; s.Mode(ListViewSelectionMode.Single))
)
</code></pre><div class="exercise-end"></div>

<p>Now that the ListView is defined you&#39;ll need to supply the datasource with employee data by creating the <strong>read action</strong> for the ListView. </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Create the EmployeesList_Read action.
</h4>

<p>Open <code>Controllers/HomeController.cs</code> and add a reference to <code>Kendo.Mvc.UI</code> and <code>Kendo.Mvc.Extensions</code>. These dependencies are needed for the DataSourceRequest object and <code>.ToDataSourceResult</code> extension method. As we saw in the Kendo Grid chapter, the DataSourceRequest </p>
<p>At the top of the file you should have the following statements:</p>
<pre><code>using Kendo.Mvc.UI;
using Kendo.Mvc.Extensions;
</code></pre><p>Now, create an <code>ActionResult</code> named <code>EmployeesList_Read</code> that accepts a <code>DataSourceRequest</code> parameter. The parameter of type <code>DataSourceRequest</code> will contain the current ListView request information. Decorate that parameter with the <code>DataSourceRequestAttribute</code> which is  responsible for populating the <code>DataSourceRequest</code> object.</p>
<pre><code>public ActionResult EmployeesList_Read([DataSourceRequest]DataSourceRequest request)
{
}
</code></pre><p>Use entity framework to pull a list of employees, ordered by <code>FirstName</code> from the database and return the result as <code>Json</code> using the <code>.ToDataSourceResult</code> extension method.</p>
<pre><code>public ActionResult EmployeesList_Read([DataSourceRequest]DataSourceRequest request)
{
    var employees = db.Employees.OrderBy(e =&gt; e.FirstName);
    return Json(employees.ToDataSourceResult(request, ModelState), JsonRequestBehavior.AllowGet);
}
</code></pre><div class="exercise-end"></div>

<p>The ListView is almost complete, however the ListView still needs a template to apply to the data when it is rendered to the page. In the previous exercise the <code>ClientTemplateId</code> was defined, but was not created. Let&#39;s learn about Kendo Templating and complete the ListView.</p>
<h3 id="kendo-templates">Kendo Templates</h3>
<p>The <a href="http://docs.telerik.com/kendo-ui/framework/templates/overview">Kendo UI Templates</a> provide a simple-to-use, high-performance JavaScript templating engine within the Kendo UI framework. Templates offer a way to create HTML chunks that can be automatically merged with JavaScript data. They are a substitute for traditional HTML string building in JavaScript.</p>
<p>Kendo UI Templates use a simple templating syntax called hash templates. With this syntax, the # (hash) sign is used to mark areas in a template that should be replaced by data when the template is executed. The # character is also used to signify the beginning and end of custom Javascript code inside the template.</p>
<p>There are three ways to use the hash syntax:</p>
<ul>
<li>Render values as HTML: <code>#= #</code>.</li>
<li>Use HTML encoding to display values: <code>#: #</code>.</li>
<li>Execute arbitrary Javascript code: <code># if (true) { # ... non-script content here ... # } #</code>.</li>
</ul>
<p>Example:</p>
<pre><code>&lt;script type=&quot;text/x-kendo-template&quot; id=&quot;myTemplate&quot;&gt;
    #if(isAdmin){#
        &lt;li&gt;#: name # is Admin&lt;/li&gt;
    #}else{#
        &lt;li&gt;#: name # is User&lt;/li&gt;
    #}#
&lt;/script&gt;
</code></pre><h4 class="exercise-start">
    <b>Exercise</b>: Create the ListView template for showing an employee.
</h4>

<p>Open <code>/Views/Home/Index.cshtml</code> and find the placeholder <code>&lt;!-- Kendo Templates --&gt;</code>.</p>
<p>After <code>&lt;!-- Kendo Templates --&gt;</code> add a new <code>&lt;script&gt;</code> element of <strong>type</strong> <code>&quot;text/x-kendo-tmpl&quot;</code> with an <strong>id</strong> of <code>EmployeeItemTemplate</code></p>
<p>The resulting code should be: </p>
<pre><code>&lt;!-- Kendo Templates --&gt;
&lt;script type=&quot;text/x-kendo-tmpl&quot; id=&quot;EmployeeItemTemplate&quot;&gt;
&lt;/script&gt;    
&lt;!-- /Kendo Templates --&gt;
</code></pre><p>Inside the template create a <code>&lt;li&gt;</code> and set the <strong>class</strong> to <code>employee</code>.</p>
<p>Add a <code>&lt;div&gt;</code> element inside the <code>&lt;li&gt;</code>. Inside the <code>&lt;div&gt;</code> add an image that corresponds to the <code>EmployeeId</code> by setting the <strong>src</strong> to <code>&quot;@(Url.Content(&quot;~/content/employees/&quot;))#:EmployeeId#-t.png&quot;</code> and a <code>&lt;span&gt;</code> with the template field <code>#: FullName #</code>.</p>
<p>The resulting code should be: </p>
<pre><code>&lt;!-- Kendo Templates --&gt;
&lt;script type=&quot;text/x-kendo-tmpl&quot; id=&quot;EmployeeItemTemplate&quot;&gt;
    &lt;li class=&quot;employee&quot;&gt;
        &lt;div&gt;
            &lt;img src=&quot;@(Url.Content(&quot;~/content/employees/&quot;))#:EmployeeId#-t.png&quot; /&gt;
            &lt;span&gt; #: FullName #&lt;/span&gt;
        &lt;/div&gt;
    &lt;/li&gt;
&lt;/script&gt;    
&lt;!-- /Kendo Templates --&gt;
</code></pre><p>Run the application to see the ListView in action.</p>
<div class="exercise-end"></div>

<p>If everything was done correctly, the list view should look like this.</p>
<p><img src="images/chapter5/employee-list.jpg" alt="employee list view"></p>
<p>At this point you can select items from the list, but before the dashboad can become truly interactive you&#39;ll need to work with the client side APIs.</p>

			</div>
						<hr>
			<div class="chapter">
				<h2 id="client-side">Client Side</h2>
<p>In this chapter you&#39;ll learn about client side events and how to take control of Kendo UI using JavaScript.</p>
<h3 id="working-with-client-side-events">Working with client side events</h3>
<p>UI for MVC helpers provide an <code>Events</code> method that is part of the HTML Helper&#39;s property chain. The Events method is used to set event handlers for the component. Each component has a variety of events that can be handled including: cancel, change, dataBound, dataBinding, edit, remove, and save.</p>
<p>Example:</p>
<pre><code>@(Html.Kendo().ListView&lt;ProductViewModel&gt;()
        .Name(&quot;listView&quot;)
        .TagName(&quot;div&quot;)
        .ClientTemplateId(&quot;template&quot;)
        .DataSource(dataSource =&gt; {
            dataSource.Read(read =&gt; read.Action(&quot;Products_Read&quot;, &quot;ListView&quot;));
        })
        .Events(e =&gt; e
            .DataBound(&quot;productListView_dataBound&quot;)
            .Change(&quot;productListView_change&quot;)
        )
)
</code></pre><p>Let&#39;s continue to work with the Employee ListView that was created in the previous chapter. The list is selectable, but when the application starts the first item should be selected by default giving the user a starting point to begin interacting with the dashboard.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Select the first list item by default.
</h4>

<p>Find the EmployeeList List View</p>
<pre><code>&lt;!-- Employee List View --&gt;
@(Html.Kendo().ListView&lt;Employee&gt;()
        .Name(&quot;EmployeesList&quot;)
        ...
        .Selectable(s =&gt; s.Mode(ListViewSelectionMode.Single))
)
</code></pre><p>Add an event handler named <code>onListDataBound</code> for the <code>DataBound</code> event for the EmployeeList ListView.</p>
<pre><code>@(Html.Kendo().ListView&lt;KendoQsBoilerplate.Employee&gt;()
    ...
    .Selectable(s =&gt; s.Mode(ListViewSelectionMode.Single))
    .Events(e =&gt; e.DataBound(&quot;onListDataBound&quot;))
)
</code></pre><p>The resulting code should be:</p>
<pre><code>&lt;!-- Employee List View --&gt;
@(Html.Kendo().ListView&lt;KendoQsBoilerplate.Employee&gt;()
    .Name(&quot;EmployeesList&quot;)
    .ClientTemplateId(&quot;EmployeeItemTemplate&quot;)
    .TagName(&quot;ul&quot;)
    .DataSource(dataSource =&gt;
    {
        dataSource.Read(read =&gt; read.Action(&quot;EmployeesList_Read&quot;, &quot;Home&quot;));
        dataSource.PageSize(9);
    })
        .Selectable(s =&gt; s.Mode(ListViewSelectionMode.Single))
        .Events(e =&gt; e.DataBound(&quot;onListDataBound&quot;))
)
</code></pre><p>In the same view find the <code>Scripts</code> section.</p>
<pre><code>@section Scripts {
    &lt;script&gt;
        //Custom Scripts
    &lt;/script&gt;
}
</code></pre><p>In the <code>&lt;script&gt;</code> element and add a function <code>onListDataBound</code>, the function can accept an event parameter <code>e</code>.</p>
<p>Select the first element by calling the <code>.select</code> function on the ListView object <code>this</code> and pass in the element first employee element using the jQuery selector <code>$(&quot;.employee:first&quot;)</code>.</p>
<pre><code>@section Scripts {
    &lt;script&gt;
        //Custom Scripts
        function onListDataBound(e) {
            this.select($(&quot;.employee:first&quot;));
        }
    &lt;/script&gt;
}
</code></pre><p>Refresh the page to see that the first item in the list is selected by default.</p>
<p><img src="images\chapter6\employee-list-selected.jpg" alt="employee list selected"></p>
<div class="exercise-end"></div>

<p>Selecting the first item using the <code>DataBound</code> event was a good start. Next we&#39;ll take it a step further by using the selected item to populate a Kendo template showing the selected employee on the dashboard.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Use the Change event to populate a template. 
</h4>

<p>Add an event handler named <code>onCriteriaChange</code> for the <code>Change</code> event for the EmployeeList ListView.</p>
<pre><code>@(Html.Kendo().ListView&lt;Employee&gt;()
        ...
        .Selectable(s =&gt; s.Mode(ListViewSelectionMode.Single))
        .Events(e =&gt; e.DataBound(&quot;onListDataBound&quot;)
                         .Change(&quot;onCriteriaChange&quot;))
)
</code></pre><p>Find the <code>&lt;!-- Kendo Templates --&gt;</code> placeholder</p>
<pre><code>&lt;!-- Kendo Templates --&gt;
    ...
&lt;!-- /Kendo Templates --&gt;
</code></pre><p>Add a new template that will display the selected employee&#39;s image and full name.</p>
<pre><code>&lt;!-- Kendo Templates --&gt;
&lt;script type=&quot;text/x-kendo-tmpl&quot; id=&quot;employeeAvatarTemplate&quot;&gt;
    &lt;img src=&quot;@(Url.Content(&quot;~/content/employees/&quot;))#:EmployeeId#.png&quot; /&gt;
    &lt;span&gt;#:FullName#&lt;/span&gt;
&lt;/script&gt;
</code></pre><p>Find the <code>&lt;script&gt;</code> tag.</p>
<pre><code>&lt;script&gt;
    ...
&lt;/script&gt;
</code></pre><p>Add a function named <code>getSelectedEmployee</code> that returns the selected employee from the EmployeeList ListView.</p>
<pre><code>function getSelectedEmployee() {
    var employeeList = $(&quot;#EmployeesList&quot;).data(&quot;kendoListView&quot;),
    employee = employeeList.dataSource.getByUid(employeeList.select().attr(&quot;data-uid&quot;));
    return employee;
}
</code></pre><p>Add a function named <code>updateEmployeeAvatar</code> that binds the selected employee data to the <code>employeeAvatarTemplate</code> and places the template&#39;s  content in the <code>employee-about</code> element.</p>
<pre><code>function updateEmployeeAvatar() {
    var employee = getSelectedEmployee(),
        template = kendo.template($(&quot;#employeeAvatarTemplate&quot;).html());

    //apply template
    $(&quot;#employee-about&quot;).html(template(employee));
}
</code></pre><p>Add a function named <code>onCriteriaChange</code>, this function will handle the <code>Change</code> event and call <code>updateEmployeeAvatar</code>.</p>
<pre><code>function onCriteriaChange() {
    updateEmployeeAvatar();
}
</code></pre><p>Refresh the page and select an employee from the ListView. Selecting an item should update the dashboard with the selected employee&#39;s data.</p>
<p><img src="images/chapter6/selected-item-to-template.jpg" alt="selected item to template"></p>
<div class="exercise-end"></div>
			</div>
						<hr>
			<div class="chapter">
				<h2 id="kendo-datasource">Kendo Datasource</h2>
<p>In this chapter you&#39;ll learn how to work with Kendo UI datasources.</p>
<h3 id="working-with-the-kendo-datasource">Working with the Kendo Datasource</h3>
<p>At this point the dashboard is showing all invoice data. Let&#39;s use the EmployeeList list view and StatsFrom/StatsTo date pickers to filter the invoice grid by invoking the grid&#39;s datasource. </p>
<h4 class="exercise-start">
    <b>Exercise</b>: Create a filter.
</h4>

<p>In the view <code>/Views/Home/Index.cshtml</code> find the scripts section.</p>
<pre><code>&lt;script&gt;
    ...
&lt;/script&gt;
</code></pre><p>Add a function named <code>getEmployeeFilter</code> that gets the <code>employeeId</code>, <code>salesPerson</code>, <code>statsFrom</code> and <code>statsTo</code> values and returns a JSON object. </p>
<p>The resulting code should be:</p>
<pre><code>function getEmployeeFilter() {
    var employee = getSelectedEmployee(),
        statsFrom = $(&quot;#StatsFrom&quot;).data(&quot;kendoDatePicker&quot;),
        statsTo = $(&quot;#StatsTo&quot;).data(&quot;kendoDatePicker&quot;);

    var filter = {
        employeeId: employee.EmployeeId,
        salesPerson: employee.FullName,
        statsFrom: statsFrom.value(),
        statsTo: statsTo.value()
    }
    return filter;
}
</code></pre><p>In the view <code>/Views/Invoice/Index.cshtml</code> find the EmployeeSales Grid.    </p>
<pre><code>@(Html.Kendo().Grid&lt;KendoQsBoilerplate.Invoice&gt;()
      .Name(&quot;EmployeeSales&quot;)
      ...
      .Scrollable(scrollable =&gt; scrollable.Enabled(false))
      .DataSource(dataSource =&gt; dataSource
          .Ajax()
          .Read(read =&gt; read.Action(&quot;Invoices_Read&quot;, &quot;Invoice&quot;))
      )
)
</code></pre><p>On the Grid&#39;s <code>DataSource</code> property, set the <code>Data</code> property to <code>getEmployeeFilter</code>. The <code>Data</code> property supplies additional data to the server, in this case the datas is our filter parameters.</p>
<pre><code>.DataSource(dataSource =&gt; dataSource
            .Ajax()
            .Read(read =&gt; read.Action(&quot;Invoices_Read&quot;, &quot;Invoice&quot;)
            .Data(&quot;getEmployeeFilter&quot;))
)
</code></pre><p>Add the property <code>AutoBind</code> to the end of the property chain and set the value to <code>false</code>. Setting AutoBind to false tells UI for MVC that the datasource&#39;s <code>Read</code> action is invoked on manually on the client.</p>
<p>The resulting code should be:</p>
<pre><code>@(Html.Kendo().Grid&lt;QuickStart.Models.Invoice&gt;()
      .Name(&quot;EmployeeSales&quot;)
      ...
      .Scrollable(scrollable =&gt; scrollable.Enabled(false))
      .DataSource(dataSource =&gt; dataSource
          .Ajax()
          .Read(read =&gt; read.Action(&quot;Invoices_Read&quot;, &quot;Invoice&quot;)
          .Data(&quot;getEmployeeFilter&quot;))
      )
      .AutoBind(false)
)
</code></pre><p>In the view <code>/Views/Home/Index.cshtml</code> add a function named <code>refreshGrid</code>, this function will invoke the Grid&#39;s <code>Read</code> action.</p>
<p>The resulting code should be:</p>
<pre><code>function refreshGrid() {
    var employeeSales = $(&quot;#EmployeeSales&quot;).data(&quot;kendoGrid&quot;);
    employeeSales.dataSource.read();
}
</code></pre><p>Find the function <code>onCriteriaChange</code> and add a call to the <code>refreshGrid</code> function. This will cause the Grid&#39;s data to refresh whenever the employee selection changes.</p>
<p>The resulting code should be:</p>
<pre><code>function onCriteriaChange() {
    updateEmployeeAvatar();
    refreshGrid();
}
</code></pre><p>Next, we&#39;ll need to update the Grid&#39;s <code>Read</code> action to apply the filter using Entity Framework.</p>
<p>Open <code>Controllers/InvoiceController.cs</code> and find the <code>Invoices_Read</code> action.</p>
<pre><code>public ActionResult Invoices_Read([DataSourceRequest]DataSourceRequest request)
{
    IQueryable&lt;Invoice&gt; invoices = db.Invoices;
    DataSourceResult result = invoices.ToDataSourceResult(request, invoice =&gt; new {
        OrderID = invoice.OrderID,
        CustomerName = invoice.CustomerName,
        OrderDate = invoice.OrderDate,
        ProductName = invoice.ProductName,
        UnitPrice = invoice.UnitPrice,
        Quantity = invoice.Quantity,
        Salesperson = invoice.Salesperson
    });

    return Json(result);
}
</code></pre><p>Add the parameters <code>salesPerson</code>, <code>statsFrom</code> and <code>statsTo</code> to the action.</p>
<pre><code>public ActionResult Invoices_Read([DataSourceRequest]DataSourceRequest request,
    string salesPerson,
    DateTime statsFrom, 
    DateTime statsTo)
</code></pre><p>Using the parameter values filter the invoices using a <code>Where</code> LINQ query.</p>
<p>The resulting code should be:</p>
<pre><code>public ActionResult Invoices_Read([DataSourceRequest]DataSourceRequest request,
    string salesPerson,
    DateTime statsFrom, 
    DateTime statsTo)
{
    var invoices = db.Invoices.Where(inv =&gt; inv.Salesperson == salesPerson)
        .Where(inv =&gt; inv.OrderDate &gt;= statsFrom &amp;&amp; inv.OrderDate &lt;= statsTo);
    DataSourceResult result = invoices.ToDataSourceResult(request, invoice =&gt; new {
        OrderID = invoice.OrderID,
        CustomerName = invoice.CustomerName,
        OrderDate = invoice.OrderDate,
        ProductName = invoice.ProductName,
        UnitPrice = invoice.UnitPrice,
        Quantity = invoice.Quantity,
        Salesperson = invoice.Salesperson
    });

    return Json(result);
}
</code></pre><p>Run the project to see the behavior. Now the EmployeeList and EmployeeSales Grid are in sync. When an employee is selected, only that employees data will show in the Grid.</p>
<p><img src="images/chapter7/datasource-filter.jpg" alt=""></p>
<div class="exercise-end"></div>

<p>At this point the EmployeeList is acting as a filter for the EmployeeSales Grid, however the data shown does not reflect the StatsFrom/StatsTo date range. With the filtering code in place, additional controls are wired up with relative ease. Let&#39;s wire up the StatsFrom/StatsTo DatePicker controls to the EmployeeSales Grid.</p>
<h4 class="exercise-start">
    <b>Exercise</b>: Trigger the grid datasource from a DatePicker event.
</h4>

<p>In the view <code>/Views/Home/Index.cshtml</code> find the StatsFrom DatePicker.</p>
<pre><code>@(Html.Kendo().DatePicker()
                .Name(&quot;StatsFrom&quot;)
                .Value(new DateTime(1996, 1, 1))
)
</code></pre><p>Add the <code>Events</code> property and set the <code>Change</code> event to <code>onCriteriaChange</code>.</p>
<pre><code>@(Html.Kendo().DatePicker()
                .Name(&quot;StatsFrom&quot;)
                .Value(new DateTime(1996, 1, 1))
                .Events(e =&gt; e.Change(&quot;onCriteriaChange&quot;))
)
</code></pre><p>Find the StatsTo DatePicker,  the <code>Events</code> property and set the <code>Change</code> event to <code>onCriteriaChange</code>.</p>
<pre><code>@(Html.Kendo().DatePicker()
                .Name(&quot;StatsTo&quot;)
                .Value(new DateTime(1998, 8, 1))
                .Events(e =&gt; e.Change(&quot;onCriteriaChange&quot;))
)
</code></pre><p>Save the changes and refresh the browser. The StatsFrom/StatsTo DatePickers and EmployeeList ListView will update the Grid with data based on the selected dates and employee.</p>
<p><img src="images/chapter7/datasource-filter2.jpg" alt=""></p>
<div class="exercise-end"></div>
			</div>
						<hr>
			<div class="chapter">
				<h2 id="kendo-charts">Kendo Charts</h2>
<p>In this chapter...</p>
<h3 id="chart-api">Chart API</h3>
<h3 id="monthly-sales-chart">Monthly sales chart</h3>
<ul>
<li><p>Stop project</p>
</li>
<li><p>Under Views/Home add a new empty partial view _MontlySalesByEmployee.cshtml</p>
<p>  Add
  @(Html.Kendo().Chart<QuickStart.Models.MonthlySalesByEmployeeViewModel>()</p>
<pre><code>                  .Name(&quot;EmployeeAverageSales&quot;)
                  .HtmlAttributes(new { style = &quot;height:30px;&quot; })
                  .Series(series =&gt;
                  {
                      series.Line(model =&gt; model.EmployeeSales)
                          .Width(1.5)
                          .Markers(m =&gt; m.Visible(false))
                          .Tooltip(t =&gt; t.Template(&quot;#=kendo.toString(value, &#39;c2&#39;)#&quot;));
                  })
                  .CategoryAxis(c =&gt; c
                      .Date()
                      .Categories(x =&gt; x.Date)
                      .Visible(false)
                      .MajorGridLines(m =&gt; m.Visible(false))
                      .MajorTicks(mT =&gt; mT.Visible(false))
                  )
                  .Legend(leg =&gt; leg.Visible(false))
                  .ValueAxis(val =&gt; val.Numeric()
                          .Visible(false)
                          .Labels(lab =&gt; lab.Visible(false))
                          .MajorGridLines(m =&gt; m.Visible(false))
                          .MajorTicks(mT =&gt; mT.Visible(false)))
                  .DataSource(ds =&gt; ds
                      .Aggregates(a =&gt; a.Add(s =&gt; s.EmployeeSales).Average())
                      .Read(read =&gt; read.Action(&quot;EmployeeAverageSales&quot;, &quot;Home&quot;)
                      .Data(&quot;getEmployeeFilter&quot;))
                  )
                  .AutoBind(false)
</code></pre><p>  )</p>
</li>
<li><p>Create a controller action</p>
</li>
<li><p>open controllers/HomeController.cs</p>
<p>  Add
  public ActionResult EmployeeAverageSales(</p>
<pre><code>  int employeeId,
  DateTime statsFrom,
  DateTime statsTo)
</code></pre><p>  {</p>
<pre><code>  var result = EmployeeAverageSalesQuery(employeeId, statsFrom, statsTo);

  return Json(result, JsonRequestBehavior.AllowGet);
</code></pre><p>  }    </p>
</li>
</ul>
<p>-open views/home/index.cshtml</p>
<pre><code>Find
&lt;!-- Montly Sales Chart --&gt;
@Html.Placehold(430, 120, &quot;Chart&quot;)

Replace
&lt;!-- Montly Sales Chart --&gt;
@Html.Partial(&quot;_MontlySalesByEmployee&quot;)

Find
&lt;script&gt;
    ...
&lt;/script&gt;

Add

function refreshEmployeeAverageSales() {
    var employeeAverageSales = $(&quot;#EmployeeAverageSales&quot;).data(&quot;kendoChart&quot;);
    employeeAverageSales.dataSource.read();
}

Find
function onCriteriaChange() {
    updateEmployeeAvatar();
    refreshGrid();
}

Append
function onCriteriaChange() {
    updateEmployeeAvatar();
    refreshGrid();
    refreshEmployeeAverageSales();
}
</code></pre><ul>
<li>Run and inspect</li>
<li><p>Add Label</p>
<p>  Find</p>
  <script>
      ...
  </script>

<p>  Add
  function onAverageSalesDataBound(e) {</p>
<pre><code>  var label = $(&quot;#EmployeeAverageSalesLabel&quot;),
      data = this.dataSource.aggregates()

  if (data.EmployeeSales) {
      label.text(kendo.toString(data.EmployeeSales.average, &quot;c2&quot;));
  } else {
      label.text(kendo.toString(0, &quot;c2&quot;));
  }
</code></pre><p>  }</p>
<p>  Find
  @(Html.Kendo().Chart<QuickStart.Models.MonthlySalesByEmployeeViewModel>()</p>
<pre><code>                      ...
                      .AutoBind(false)
</code></pre><p>  )</p>
<p>  Append
  @(Html.Kendo().Chart<QuickStart.Models.MonthlySalesByEmployeeViewModel>()</p>
<pre><code>                      ...
                      .AutoBind(false)
                      .Events(e =&gt; e.DataBound(&quot;onAverageSalesDataBound&quot;))
</code></pre><p>  )</p>
</li>
</ul>
<h3 id="quarter-to-date-sales-chart">Quarter to date sales chart</h3>
<ul>
<li><p>Stop project</p>
</li>
<li><p>Under Views/Home add a new empty partial view _QuarterToDateSales.cshtml</p>
<p>  Add
  @(Html.Kendo().Chart<QuickStart.Models.QuarterToDateSalesViewModel>()</p>
<pre><code>                  .Name(&quot;EmployeeQuarterSales&quot;)
                  .HtmlAttributes(new { style = &quot;height:30px;&quot; })
                  .Tooltip(false)
                  .Series(series =&gt;
                  {
                      series.Bullet(m =&gt; m.Current, m =&gt; m.Target);
                  })
                  .Legend(leg =&gt; leg.Visible(false))
                  .CategoryAxis(cat =&gt; cat.Labels(lab =&gt; lab.Visible(false))
                      .MajorGridLines(m =&gt; m.Visible(false)).Visible(false))
                  .ValueAxis(val =&gt; val.Numeric()
                      .Labels(lab =&gt; lab.Visible(false))
                      .MajorGridLines(m =&gt; m.Visible(false))
                      .MajorTicks(mT =&gt; mT.Visible(false)))
                  .DataSource(ds =&gt; ds
                      .Read(read =&gt; read.Action(&quot;EmployeeQuarterSales&quot;, &quot;Home&quot;)
                      .Data(&quot;getEmployeeFilter&quot;))
                  )
                  .AutoBind(false)
</code></pre><p>  )</p>
</li>
<li><p>Create a controller action</p>
</li>
<li><p>open controllers/HomeController.cs</p>
<p>  Add
  public ActionResult EmployeeQuarterSales(int employeeId, DateTime statsTo)
  {</p>
<pre><code>  DateTime startDate = statsTo.AddMonths(-3);

  var result = EmployeeQuarterSalesQuery(employeeId, statsTo, startDate);

  return Json(result, JsonRequestBehavior.AllowGet);
</code></pre><p>  }</p>
</li>
</ul>
<p>-open views/home/index.cshtml</p>
<pre><code>Find
&lt;!-- QTD Sales Chart --&gt;
@Html.Placehold(430, 120, &quot;Chart&quot;)

Replace
&lt;!-- QTD Sales Chart --&gt;
@Html.Partial(&quot;_QuarterToDateSales&quot;)

Find
&lt;script&gt;
    ...
&lt;/script&gt;

Add
function refreshEmployeeQuarterSales() {
    var employeeQuarterSales = $(&quot;#EmployeeQuarterSales&quot;).data(&quot;kendoChart&quot;);
    employeeQuarterSales.dataSource.read();
}

Find
function onCriteriaChange() {
    updateEmployeeAvatar();
    refreshGrid();
    refreshEmployeeAverageSales();
}

Append
function onCriteriaChange() {
    updateEmployeeAvatar();
    refreshGrid();
    refreshEmployeeAverageSales();
    refreshEmployeeQuarterSales();
}
</code></pre><ul>
<li>Run and inspect</li>
<li><p>Add Label</p>
<p>  Find</p>
  <script>
      ...
  </script>


</li>
</ul>
<pre><code>Add
function onQuarterSalesDataBound(e) {
    var data = this.dataSource.at(0);
    $(&quot;#EmployeeQuarterSalesLabel&quot;).text(kendo.toString(data.Current, &quot;c2&quot;));
}

Find
@(Html.Kendo().Chart&lt;QuickStart.Models.MonthlySalesByEmployeeViewModel&gt;()
                        ...
                        .AutoBind(false)
)

Append
@(Html.Kendo().Chart&lt;QuickStart.Models.MonthlySalesByEmployeeViewModel&gt;()
                        ...
                        .AutoBind(false)
                        .Events(e =&gt; e.DataBound(&quot;onQuarterSalesDataBound&quot;))
)
</code></pre>
			</div>
						<hr>
			<div class="chapter">
				<h2 id="go-responsive">Go Responsive</h2>
<p>In this chapter...</p>
<h3 id="responsive-grid">Responsive Grid</h3>
<ul>
<li>Run project</li>
<li>Inspect responsive behavior</li>
<li>Modify grid for responsive</li>
<li><p>Open Views/Invoice/Index.cshtml</p>
<p>  Find</p>
<p>  .Columns(columns =&gt;
  {</p>
<pre><code>  columns.Bound(c =&gt; c.CustomerName);
  columns.Bound(c =&gt; c.OrderDate).Format(&quot;{0:MM/dd/yyyy}&quot;);
  columns.Bound(c =&gt; c.ProductName);
  columns.Bound(c =&gt; c.UnitPrice);
  columns.Bound(c =&gt; c.Quantity);
  columns.Bound(c =&gt; c.Salesperson);
</code></pre><p>  })</p>
<p>  Update
  .Columns(columns =&gt;
  {</p>
<pre><code>  columns.Bound(c =&gt; c.CustomerName).MinScreenWidth(900);
  columns.Bound(c =&gt; c.OrderDate).Format(&quot;{0:MM/dd/yyyy}&quot;);
  columns.Bound(c =&gt; c.ProductName).MinScreenWidth(768);
  columns.Bound(c =&gt; c.UnitPrice);
  columns.Bound(c =&gt; c.Quantity);
</code></pre><p>  })</p>
</li>
<li><p>Refresh page and observe changes</p>
</li>
<li><p>Responsive Panel</p>
<p>  Find</p>
  <div class="app-wraper">
      <!-- Menu Panel -->
      <div class="hidden-xs" style="float:left;">

  Update
  <div class="app-wraper">
      <!-- Menu Panel -->
      @(Html.Kendo().ResponsivePanel().Name(&quot;menuPanel&quot;).Breakpoint(768).Content(
      @<div>

  Find
  <!-- /Menu Panel -->

  Append
  ))
  <!-- /Menu Panel -->

  Find
  <section id="app-title-bar" class="row">
      <div class="col-sm-3">
          <h1 class="title">@ViewBag.Title</h1>
      </div>
  </section>

  Append<br>  <div class="hamburger">
      <!-- toggle button for responsive panel, hidden on large screens -->
      @(Html.Kendo().Button()
                  .Name(&quot;menuPanelOpen&quot;)
                  .Content(&quot;menu&quot;)
                  .Icon(&quot;hbars&quot;)
                  .HtmlAttributes(new { @class = &quot;k-rpanel-toggle&quot; })
      )
  </div>
</li>
<li><p>Add CSS background</p>
</li>
<li><p>Open site.css</p>
<p>  Find
  /<em> Top Bar </em>/</p>
<p>  .hamburger {</p>
<pre><code>  position: absolute;
  top: 5px;
  left: 5px;
</code></pre><p>  }</p>
<p>  Find
  /<em> Side Panel </em>/    </p>
<p>  Add
  #menuPanel {</p>
<pre><code>  background-color: #fff;
  padding: 10px;
  z-index: 3;
</code></pre><p>  }</p>
</li>
<li><p>Try responsive panel</p>
</li>
<li><p>Add close button</p>
<p>  Find</p>
  <!-- Menu Panel -->
<p>  @(Html.Kendo().ResponsivePanel().Name(&quot;menuPanel&quot;).Breakpoint(768).Content(
  @<div></p>
<pre><code>  &lt;h3&gt;Report Range&lt;/h3&gt;
</code></pre><p>  Update
  @(Html.Kendo().ResponsivePanel().Name(&quot;menuPanel&quot;).Breakpoint(768).Content(
  @<div></p>
<pre><code>  &lt;div class=&quot;text-right&quot;&gt;
      @(Html.Kendo().Button()
         .Name(&quot;menuPanelClose&quot;)
         .Content(&quot;Close&quot;)
         .Icon(&quot;close&quot;)
         .HtmlAttributes(new { @class = &quot;k-rpanel-toggle&quot; })
      )
  &lt;/div&gt;
  &lt;h3&gt;Report Range&lt;/h3&gt;
</code></pre></li>
<li><p>Refresh and retry</p>
</li>
</ul>
<h3 id="responsive-panel">Responsive Panel</h3>

			</div>
						<hr>
			<div class="chapter">
				<h2 id="kendo-themes">Kendo Themes</h2>
<p>In this chapter...</p>
<h3 id="theme-change">Theme change</h3>
<ul>
<li>stop the project</li>
<li>Right click on project &gt; Telerik UI For MVC &gt; Configure Project</li>
<li>Set theme to Nova</li>
<li><p>Move     @Styles.Render(&quot;~/Content/css&quot;) just above </head></p>
</li>
<li><p>Set Charts to Nova</p>
<p>  Find
  @(Html.Kendo().Chart<QuickStart.Models.MonthlySalesByEmployeeViewModel>()</p>
<pre><code>                      ...
                      .AutoBind(false)
                      .Events(e =&gt; e.DataBound(&quot;onQuarterSalesDataBound&quot;))
</code></pre><p>  )</p>
<p>  Append
  @(Html.Kendo().Chart<QuickStart.Models.MonthlySalesByEmployeeViewModel>()</p>
<pre><code>                      ...
                      .AutoBind(false)
                      .Events(e =&gt; e.DataBound(&quot;onQuarterSalesDataBound&quot;))
                      .Theme(&quot;nova&quot;)
</code></pre><p>  )</p>
<p>  Find
  @(Html.Kendo().Chart<QuickStart.Models.MonthlySalesByEmployeeViewModel>()</p>
<pre><code>                      ...
                      .Events(e =&gt; e.DataBound(&quot;onAverageSalesDataBound&quot;))
                      .AutoBind(false)
</code></pre><p>  )</p>
<p>  Append
  @(Html.Kendo().Chart<QuickStart.Models.MonthlySalesByEmployeeViewModel>()</p>
<pre><code>                      ...
                      .AutoBind(false)
                      .Events(e =&gt; e.DataBound(&quot;onAverageSalesDataBound&quot;))
                      .Theme(&quot;nova&quot;)
</code></pre><p>  )</p>
</li>
</ul>
<h3 id="finishing-the-app-theme">Finishing the app theme</h3>
<ul>
<li>Add CSS primer</li>
<li><p>Open Views/Shared/_Layout.cshtml</p>
<p>  Find
  @Styles.Render(&quot;~/Content/css&quot;)
  </head></p>
<p>  Update
  @Styles.Render(&quot;~/Content/css&quot;)
  <link href="~/Content/site-nova.css" rel="stylesheet" />
  </head></p>
</li>
<li><p>Refresh</p>
</li>
<li><p>open site-nova.css</p>
<p>  Find
  /<em> Side Panel - Employee List </em>/</p>
<p>  Append
  /<em> Side Panel - Employee List </em>/
  #menuPanel .k-widget.k-datepicker.k-header {</p>
<pre><code>  width: 100%;
</code></pre><p>  }</p>
<p>  #employee-list &gt; ul {</p>
<pre><code>  margin: 0 -10px;
</code></pre><p>  }</p>
<p>  Find
  /<em> Small Devices, Tablets, and Up </em>/
  @media only screen and (min-width : 768px) {</p>
<p>  }</p>
<p>  Update
  /<em> Small Devices, Tablets, and Up </em>/
  @media only screen and (min-width : 768px) {</p>
<pre><code>  .app-wraper {
      position: relative;
      margin-left: -15px;
  }
</code></pre><p>  }</p>
</li>
</ul>

			</div>
						<hr>
			<div class="chapter">
				<h2 id="next-steps">Next Steps</h2>

			</div>
			
		</div>
	</div>
</div>

<script src="scripts/built.js"></script>

</body>
</html>